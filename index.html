<!DOCTYPE html>
<html lang="en" style="height: 100%">
    <head>
        <!-- <meta http-equiv="refresh" content="10"> -->
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat/dist/ecStat.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/dataTool.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/world.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/bmap.min.js"></script>
       <script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=2GCVEjjkYGGiVjTR1EoENtf2SNzYaiRI"></script>
       <script src="theme/dark.js"></script>
       <!-- button -->
       <!-- <link rel="shortcut icon" href="../favicon.ico"> 
       <link rel="stylesheet" type="text/css" href="css/default.css" />
       <link rel="stylesheet" type="text/css" href="css/component.css" />
       <script src="js/modernizr.custom.js"></script> -->

       <!-- Stylesheet -->
        <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous"> -->
        
        <!-- jQuery & Bootstrap -->
        <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script> -->

        <!-- Latest compiled and minified CSS -->
        <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.12/dist/css/bootstrap-select.min.css"> -->

        <!-- Latest compiled and minified JavaScript -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.12/dist/js/bootstrap-select.min.js"></script> -->

        <!-- (Optional) Latest compiled and minified JavaScript translation files -->
        <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.12/dist/js/i18n/defaults-*.min.js"></script> -->

        <!-- semantic-ui -->
        <link href="./semantic.min.css" rel="stylesheet" type="text/css">
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="./semantic.min.js"></script>

       <style type="text/css">
        div#mapDiv {
            background-color:green;
            height:75%;
            width:75%;
            float:left;
        }
        div#optionList {
            /* background-color:gray; */
            height:75%;
            width:25%;
            float:left;
        }
        div#chart {
            /* background-color:blue; */
            width:100%;
            height:25%;
            float: left; 
        }
        </style>

        
    </head>

    <body style="height: 100%; margin: 0">
        <!-- <div id="Echarts"></div> -->
        <div id="mapDiv"></div>
        <div id="optionList">
            <div id="detailOption" style="height: 20%; width: 100%; float: left; ">
                <select name="requestType"" class="ui dropdown" id="select">
                    <optgroup label="车辆状态">
                        <option value="velocity" selected>速度</option>
                        <option value="cumulative_mileage">总行驶里程</option>
                        <option value="drive_motor_rpm">电机转速</option>
                        <option value="drive_motor_temperature">电机温度</option>
                    </optgroup>
                    <optgroup label="电池信息">
                        <option value="residual_energy">剩余电量</option>
                        <option value="high_voltage_battery_current">总电流</option>
                        <option value="total_battery_voltage">总电压</option>
                        <option value="max_single_voltage">电池最高单体电压</option>
                        <option value="min_single_voltage">电池最低单体电压</option>
                        <option value="insulation_resistance_value">绝缘阻值</option>
                    </optgroup>
                    <optgroup label="其他数据">
                        <option value="motor_torque">电机转矩</option>
                        <option value="motor_controller_current">电机控制器电流</option>
                        <option value="motor_controller_voltage">电机控制器电压</option>
                    </optgroup>
                </select>
                <script>$('#select').dropdown();</script>
                <div class="ui input" id="input">
                    <input type="text" placeholder="按车辆编号搜索">
                </div>
                <div class="ui animated button">
                    <div class="visible content">搜索</div>
                    <div class="hidden content">走</div>
                </div>  
            </div>
            <div id="detailLine" style="height: 35%; width: 100%; float: left;">
                    <div id="dynamicLine" style="height: 130%; width: 100%; float: left;"></div>
            </div>

            <div id="detailPanel" style="height: 45%; width: 100%; float: left;">
                <div id="guage" style="height: 130%; width: 100%; float: left;"></div>
            </div>
            
        </div>
        <div id="chart">
            <div id="Pie" style="height: 100%; width: 25%; float: left;"></div>
            <!-- <div id="Gauge" style="height: 100%; width: 25%; float: left;"></div> -->
            <!-- <div id="Heatmap"" style="height: 100%; width: 50%; float: left;"></div> -->
            <div id="Stack" style="height: 100%; width: 50%; float: left;"></div>
            <div id="Board" style="height: 100%; width: 25%; float: left;">
                <div style="height: 40%; float: left; padding-right: 10%;">
                    <p id="time1" style="margin-left: 5%; margin-top: 5%;">item1</p>
                    <iframe id="fancybox-frame" name="fancybox-frame1573219207283" frameborder="0" scrolling="no" hspace="0"  src="http://i.tianqi.com/index.php?c=code&a=getcode&id=35&h=55&w=200"></iframe>
                
                </div>                    
                <div style="height: 60%; width: 100%; padding-left:5%; float: left;">
                    <table border="0" style="font: size 200px; height: 100%; width: 70%;">
                        <tr><td> </td></tr>
                        <tr><td> </td></tr>
                        <tr><td> </td></tr>
                        <tr><td> </td></tr>

                    </table>
                </div>

                </div>
                
                <script>
                    function mytime(){
                        var a = new Date();
                        var b = a.toLocaleTimeString();
                        var c = a.toLocaleDateString();
                        document.getElementById("time1").innerHTML = "&nbsp"+"&nbsp"+c+"&nbsp"+b;
                        }
                    setInterval(function() {mytime()},1000);
                </script>

            </div>

            
        </div>

<!-- 右侧栏折线图 开始 -->
        <script type="text/javascript">
            var domLine = document.getElementById("dynamicLine");
            var myChartLine = echarts.init(domLine);
            var app = {};
            optionLine = null;
            function randomData() {
                now = new Date(+now + oneDay);
                value = value + Math.random() * 21 - 10;
                return {
                    name: now.toString(),
                    value: [
                        [now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/'),
                        Math.round(value)
                    ]
                }
            }
            
            var data = [];
            var now = +new Date(1997, 9, 3);
            var oneDay = 24 * 3600 * 1000;
            var value = Math.random() * 1000;
            for (var i = 0; i < 1000; i++) {
                data.push(randomData());
            }
            
            optionLine = {
                title: {
                    text: '历史速度'
                },
                tooltip: {
                    trigger: 'axis',
                    formatter: function (params) {
                        params = params[0];
                        var date = new Date(params.name);
                        return date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear() + ' : ' + params.value[1];
                    },
                    axisPointer: {
                        animation: false
                    }
                },
                xAxis: {
                    type: 'time',
                    splitLine: {
                        show: false
                    }
                },
                yAxis: {
                    type: 'value',
                    boundaryGap: [0, '100%'],
                    splitLine: {
                        show: false
                    }
                },
                series: [{
                    name: '模拟数据',
                    type: 'line',
                    showSymbol: false,
                    hoverAnimation: false,
                    data: data
                }]
            };
            
            setInterval(function () {
            
                for (var i = 0; i < 5; i++) {
                    data.shift();
                    data.push(randomData());
                }
            
                myChartLine.setOption({
                    series: [{
                        data: data
                    }]
                });
            }, 1000);;
            if (optionLine && typeof optionLine === "object") {
                myChartLine.setOption(optionLine, true);
            }
        </script>
<!-- 右侧栏折线图 结束 -->

<!-- 右侧栏仪表盘 开始 -->

        <script type="text/javascript">
            var domGuage = document.getElementById("guage");
            var myChartGuage = echarts.init(domGuage);
            var app = {};
            optionGuage = null;
            optionGuage = {
                tooltip : {
                    formatter: "{a} <br/>{c} {b}"
                },
                // toolbox: {
                //     show: true,
                //     feature: {
                //         restore: {show: true},
                //         saveAsImage: {show: true}
                //     }
                // },
                series : [
                    {
                        name: '速度',
                        type: 'gauge',
                        z: 3,
                        center: ['48%', '50%'],    // 默认全局居中

                        min: 0,
                        max: 50,
                        splitNumber: 10,
                        radius: '55%',
                        axisLine: {            // 坐标轴线
                            lineStyle: {       // 属性lineStyle控制线条样式
                                color : [ //表盘颜色
                                    [ 0.2,  "#8FBC8F"],//0-50%处的颜色
                                    [ 0.6, "#4F94CD" ],//51%-70%处的颜色
                                    [ 1, "#B22222" ],//70%-90%处的颜色
                                ],
                                width: 10
                            }
                        },
                        axisTick: {            // 坐标轴小标记
                            length: "15%",        // 属性length控制线长
                            lineStyle: {       // 属性lineStyle控制线条样式
                                color: 'auto'
                            }
                        },
                        splitLine: {           // 分隔线
                            length: "20%",         // 属性length控制线长
                            lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                                color: 'auto'
                            }
                        },
                        axisLabel: {
                            backgroundColor: 'auto',
                            borderRadius: 2,
                            color: '#eee',
                            padding: 3,
                            fontSize:'70%',
                            textShadowBlur: 2,
                            textShadowOffsetX: 1,
                            textShadowOffsetY: 1,
                            textShadowColor: '#222'
                        },
                        pointer: {
                            width:"7%"
                        },
                        title : {
                            // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                            fontWeight: 'bolder',
                            fontSize: '60%',
                            fontStyle: 'italic'
                        },
                        detail : {
                            // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                            formatter: function (value) {
                                value = (value + '').split('.');
                                value.length < 2 && (value.push('00'));
                                return ('00' + value[0]).slice(-2)
                                    + '.' + (value[1] + '00').slice(0, 2);
                            },
                            fontWeight: 'bolder',
                            borderRadius: 3,
                            backgroundColor: '#444',
                            borderColor: '#aaa',
                            shadowBlur: 5,
                            shadowColor: '#333',
                            shadowOffsetX: 0,
                            shadowOffsetY: 3,
                            borderWidth: 2,
                            textBorderColor: '#000',
                            textBorderWidth: 2,
                            textShadowBlur: 2,
                            textShadowColor: '#fff',
                            textShadowOffsetX: 0,
                            textShadowOffsetY: 0,
                            fontFamily: 'Arial',
                            fontSize:'100%',
                            width: 100,
                            color: '#eee',
                            rich: {}
                        },
                        data:[{value: 40, name: 'km/h'}]
                    },
                    {
                        name: '转速',
                        type: 'gauge',
                        center: ['15%', '55%'],    // 默认全局居中
                        radius: '30%',
                        min:0,
                        max:7,
                        endAngle:50,
                        splitNumber:7,
                        axisLine: {            // 坐标轴线
                            lineStyle: {       // 属性lineStyle控制线条样式
                                width: 8
                            }
                        },
                        axisTick: {            // 坐标轴小标记
                            length:'15%',        // 属性length控制线长
                            lineStyle: {       // 属性lineStyle控制线条样式
                                color: 'auto'
                            }
                        },
                        splitLine: {           // 分隔线
                            length:'20%',         // 属性length控制线长
                            lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                                color: 'auto'
                            }
                        },
                        pointer: {
                            width:"8%"
                        },
                        title: {
                            offsetCenter: [0, '-30%'],       // x, y，单位px
                            fontSize:'60%'
                        },
                        detail: {
                            // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                            fontWeight: 'bolder',
                            fontSize:'10%',
                        },
                        data:[{value: 1.5, name: 'x1000 r/min'}]
                    },
                    {
                        name: '油表',
                        type: 'gauge',
                        center: ['80%', '40%'],    // 默认全局居中
                        radius: '25%',
                        min: 0,
                        max: 2,
                        startAngle: 135,
                        endAngle: 45,
                        splitNumber: 2,
                        axisLine: {            // 坐标轴线
                            lineStyle: {       // 属性lineStyle控制线条样式
                                width: 8
                            }
                        },
                        axisTick: {            // 坐标轴小标记
                            splitNumber: 5,
                            length: '10%',        // 属性length控制线长
                            lineStyle: {        // 属性lineStyle控制线条样式
                                color: 'auto'
                            }
                        },
                        axisLabel: {
                            formatter:function(v){
                                switch (v + '') {
                                    case '0' : return 'E';
                                    case '1' : return 'Gas';
                                    case '2' : return 'F';
                                }
                            }
                        },
                        splitLine: {           // 分隔线
                            length: '15%',         // 属性length控制线长
                            lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                                color: 'auto'
                            }
                        },
                        pointer: {
                            width:"4%"
                        },
                        title : {
                            show: false
                        },
                        detail : {
                            show: false
                        },
                        data:[{value: 0.5, name: 'gas'}]
                    },
                    {
                        name: '水表',
                        type: 'gauge',
                        center : ['80%', '58%'],    // 默认全局居中
                        radius : '25%',
                        min: 0,
                        max: 2,
                        startAngle: 315,
                        endAngle: 225,
                        splitNumber: 2,
                        axisLine: {            // 坐标轴线
                            lineStyle: {       // 属性lineStyle控制线条样式
                                width: 8
                            }
                        },
                        axisTick: {            // 坐标轴小标记
                            show: false
                        },
                        axisLabel: {
                            formatter:function(v){
                                switch (v + '') {
                                    case '0' : return 'H';
                                    case '1' : return 'Water';
                                    case '2' : return 'C';
                                }
                            }
                        },
                        splitLine: {           // 分隔线
                            length: '15%',         // 属性length控制线长
                            lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                                color: 'auto'
                            }
                        },
                        pointer: {
                            width:"4%"
                        },
                        title: {
                            show: false
                        },
                        detail: {
                            show: false
                        },
                        data:[{value: 0.5, name: 'gas'}]
                    }
                ]
            };
            
            setInterval(function (){
                optionGuage.series[0].data[0].value = (Math.random()*60).toFixed(2) - 0;
                optionGuage.series[1].data[0].value = (Math.random()*7).toFixed(2) - 0;
                optionGuage.series[2].data[0].value = (Math.random()*2).toFixed(2) - 0;
                optionGuage.series[3].data[0].value = (Math.random()*2).toFixed(2) - 0;
                myChartGuage.setOption(optionGuage,true);
            },2000);;
            if (optionGuage && typeof optionGuage === "object") {
                myChartGuage.setOption(optionGuage, true);
            }
        </script>
       
<!-- 底部栏 -->
        <script type="text/javascript">
      
    // <!-- Pie Start -->
            var domPie = document.getElementById("Pie");
            var myChartPie = echarts.init(domPie);
            var app = {};
            optionPie = null;
            app.title = '环形图';
            
            optionPie = {
                tooltip: {
                    triggeron:'click',
                    trigger: 'item',
                    formatter: "{b}: {c} ({d}%)"
                },
                legend: {
                    orient: 'vertical',
                    x: 'left',
                    data:['运行中','空闲中','低电量','离线','待维修']
                    // tooltip: {
                    //     triggeron:'click',
                    //     trigger: 'item',
                    //     formatter: "{b}: {c} ({d}%)"
                    // }

                },
                series: [
                    {
                        name:'车辆状态',
                        type:'pie',
                        radius: ['35%', '70%'],
                        avoidLabelOverlap: false,
                        label: {
                            normal: {
                                show: false,
                                position: 'center'
                            },
                            emphasis: {
                                show: true,
                                textStyle: {
                                    fontSize: '110%',
                                    fontWeight: 'bold'
                                }
                            }
                        },
                        labelLine: {
                            normal: {
                                show: true
                            }
                        },
                        data:[
                            {value:335, name:'运行中'},
                            {value:335, name:'空闲中'},
                            {value:310, name:'低电量'},
                            {value:234, name:'离线'},
                            {value:135, name:'待维修'},
                        ]
                    }
                ]
            };
            ;
            if (optionPie && typeof optionPie === "object") {
                myChartPie.setOption(optionPie, true);
            }
        // <!-- Pie End -->


        // 层叠图开始
            var domStack = document.getElementById("Stack");
            var myChartStack = echarts.init(domStack);
            var app = {};
            optionStack = null;
            optionStack = {
                title: {
                    text: '车辆使用情况'
                },
                tooltip : {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#6a7985'
                        }
                    }
                },
                legend: {
                    data:['使用中','空闲中','低电量','离线','待维修']
                },
                // toolbox: {
                //     feature: {
                //         saveAsImage: {}
                //     }
                // },
                grid: {
                    // top: '15%',
                    left: '3%',
                    right: '4%',
                    bottom: '50px',
                    containLabel: true
                },
                xAxis : [
                    {
                        type : 'category',
                        boundaryGap : false,
                        data : ['','','','','','','']
                    }
                ],
                yAxis : [
                    {
                        type : 'value'
                    }
                ],
                dataZoom: [
                    {   // 这个dataZoom组件，默认控制x轴。
                        type: 'slider', // 这个 dataZoom 组件是 slider 型 dataZoom 组件
                        start: 50,      // 左边在 10% 的位置。
                        end: 100         // 右边在 60% 的位置。
                    },
                    {   // 这个dataZoom组件，也控制x轴。
                        type: 'inside', // 这个 dataZoom 组件是 inside 型 dataZoom 组件
                        start: 50,      // 左边在 10% 的位置。
                        end: 100         // 右边在 60% 的位置。
                    }
                ],
                series : [
                    {
                        name:'使用中',
                        type:'line',
                        stack: '总量',
                        areaStyle: {},
                        data:[120, 132, 101, 134, 90, 230, 210]
                    },
                    {
                        name:'空闲中',
                        type:'line',
                        stack: '总量',
                        areaStyle: {},
                        data:[220, 182, 191, 234, 290, 330, 310]
                    },
                    {
                        name:'低电量',
                        type:'line',
                        stack: '总量',
                        areaStyle: {},
                        data:[150, 232, 201, 154, 190, 330, 410]
                    },
                    {
                        name:'离线',
                        type:'line',
                        stack: '总量',
                        areaStyle: {normal: {}},
                        data:[320, 332, 301, 334, 390, 330, 320]
                    },
                    {
                        name:'待维修',
                        type:'line',
                        stack: '总量',
                        label: {
                            normal: {
                                show: true,
                                position: 'top'
                            }
                        },
                        areaStyle: {normal: {}},
                        data:[820, 932, 901, 934, 1290, 1330, 1320]
                    }
                ]
            };
            ;
            if (optionStack && typeof optionStack === "object") {
                myChartStack.setOption(optionStack, true);
            }

        // 层叠图 结束

            
        </script>

        <script>
            window.onresize = function () {
                myChartPie.resize();
                myChartStack.resize();
                myChartGuage.resize();
                myChartLine.resize();
            }
        </script>

        <script>
            function eConsole(param) {
            　　//param.dataIndex 获取当前点击索引，
            　　alert(param.dataIndex);
            // 　　clickFunc(param.dataIndex);//执行点击效果
            }
            myChartPie.on("click", eConsole);
        </script>
    
               
    </body>
</html>

<script type="text/javascript">
	// 百度地图API功能
	var map = new BMap.Map("mapDiv");  // 创建Map实例
	// map.centerAndZoom("上海交通大学-电子信息与电气工程学院",15);      // 初始化地图,用城市名设置地图中心点
    //必须得要用坐标点，不然没法使用个性化地图
    // map.centerAndZoom(new BMap.Point(121.449051,31.03083),16);   //电院
    map.centerAndZoom(new BMap.Point(121.447176,31.033731),16); //新行政楼

    map.enableScrollWheelZoom(true);    //允许滚轮缩放地图
    var top_left_control = new BMap.ScaleControl({anchor: BMAP_ANCHOR_TOP_LEFT});// 左上角，添加比例尺
	var top_left_navigation = new BMap.NavigationControl();  //左上角，添加默认缩放平移控件
	var top_right_navigation = new BMap.NavigationControl({anchor: BMAP_ANCHOR_TOP_RIGHT, type: BMAP_NAVIGATION_CONTROL_SMALL}); //右上角，仅包含平移和缩放按钮
    // map.addControl(top_left_control);        
	// map.addControl(top_left_navigation);     
	map.addControl(top_right_navigation);
    // map.setMapStyleV2({     
    //     styleId: '17c84567c712a49ee687af01700e1d74'
    // });
</script>
